---
title: Mastodon Requirements
navigation: false
layout: page
---

## Matrix

### Ruby

|       |                                         |                                         |                                         |                                     |
| ----- | :-------------------------------------: | :-------------------------------------: | :-------------------------------------: | :---------------------------------: |
|       |                 **4.4**                 |                 **4.3**                 |                 **4.2**                 |               **4.1**               |
| 3.4.x | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    | :icon{name="twemoji:white-circle"}  |
| 3.3.x | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    | :icon{name="twemoji:white-circle"}  |
| 3.2.x | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |  :icon{name="twemoji:cross-mark"}   |
| 3.1.x |    :icon{name="twemoji:cross-mark"}     |   :icon{name="twemoji:yellow-square"}   |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:yellow-square"} |
| 3.0.x |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:yellow-square"} |
| 2.7.x |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     | :icon{name="twemoji:yellow-square"} |

::alert{type="success"}
Mastodon has file called `.ruby-version` in the source code that is the expected target version for that release.
You should use [rbenv](https://github.com/rbenv/rbenv) to install and manage the target Ruby version.
::

::alert{type="info"}
The official Mastodon container image will always use the correct target version of Ruby for that release.
::

### Node.js

|      |                                         |                                         |                                         |                                     |
| ---- | :-------------------------------------: | :-------------------------------------: | :-------------------------------------: | :---------------------------------: |
|      |                 **4.4**                 |                 **4.3**                 |                 **4.2**                 |               **4.1**               |
| 24.x |    :icon{name="twemoji:cross-mark"}     |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    | :icon{name="twemoji:white-circle"}  |
| 22.x | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    | :icon{name="twemoji:white-circle"}  |
| 20.x | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:white-circle"}  |
| 18.x |   :icon{name="twemoji:yellow-square"}   |   :icon{name="twemoji:yellow-square"}   |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:yellow-square"} |
| 16.x |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:yellow-square"} |
| 14.x |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     | :icon{name="twemoji:yellow-square"} |

::alert{type="success"}
Mastodon will have a file called `.nvmrc` in the source code that is the expected target version for that release.
You should use [nvm](https://github.com/nvm-sh/nvm) to install and manage the target Node version.
::

::alert{type="info"}
The official Mastodon container image will always use the correct target version of Node for that release.
::

### Postgres

|                                         |                                            |                                            |                                            |                                            |
| --------------------------------------- | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: |
| **Postgres**                            |                  **4.4**                   |                  **4.3**                   |                  **4.2**                   |                  **4.1**                   |
| 17.x                                    |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |     :icon{name="twemoji:white-circle"}     |     :icon{name="twemoji:white-circle"}     |
| 16.x                                    |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |     :icon{name="twemoji:white-circle"}     |     :icon{name="twemoji:white-circle"}     |
| 15.x                                    |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |
| 14.x                                    |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |
| 13.x                                    |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |
| 12.x                                    |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |
| 11.x                                    |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |
| 10.x                                    |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |

::alert{type="danger"}
Use caution when upgrading Postgres to a new major version, it requires a migration due to changes to the data formats.
**Failure to properly plan this process may result in data-loss!**
::

### Redis

|                                         |                                            |                                            |                                            |                                            |
| --------------------------------------- | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: |
|                                         |                  **4.4**                   |                  **4.3**                   |                  **4.2**                   |                  **4.1**                   |
| 7.4.x                                   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |     :icon{name="twemoji:white-circle"}     |     :icon{name="twemoji:white-circle"}     |
| 7.2.x                                   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |     :icon{name="twemoji:white-circle"}     |
| 7.0.x                                   |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |
| 6.2.x                                   |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |
| 6.0.x                                   |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |
| 5.0.x                                   |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |    :icon{name="twemoji:yellow-square"}     |

::alert{type="warning"}
At this time there has been no project level testing of Redis alternatives such as [Valkey](https://valkey.io) or [Redict](https://redict.io).
While they may work fine at this time due to the limited changes since Redis changed their license in March 2024, long term support will be largely driven by the support of major Mastodon components like [Sidekiq](https://sidekiq.org).
::

### Search

|                     |                                            |                                            |                                            |                                            |
| ------------------- | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: | :----------------------------------------: |
| **[Elasticsearch]** |                  **4.4**                   |                  **4.3**                   |                  **4.2**                   |                  **4.1**                   |
| 8.x                 | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} |
| 7.x                 |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |  :icon{name="twemoji:check-mark-button"}   |
| 6.x                 |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |
| **[OpenSearch]**    |                  **4.4**                   |                  **4.3**                   |                  **4.2**                   |                  **4.1**                   |
| 2.x                 | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-box-with-check"} |
| 1.x                 |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |      :icon{name="twemoji:cross-mark"}      |

::alert{type="success"}
Administrators can elect to use either Elasticsearch or OpenSearch as targets for full text search indexing.
Elasticsearch 7.x is the only officially supported version at this time due to limitations of Chewy.
OpenSearch 2.x (as a fork of Elasticsearch 7.x) is compatable with Mastodon, and many administrators opt to use OpenSearch for this reason.
::

::alert{type="warning"}
Many administrators opt to use Elasticsearch 8.x and do so without issues.
::

### Images

|                   |                                         |                                            |                                         |                                         |
| ----------------- | :-------------------------------------: | :----------------------------------------: | :-------------------------------------: | :-------------------------------------: |
| **[libvips]**     |                 **4.4**                 |                  **4.3**                   |                 **4.2**                 |                 **4.1**                 |
| 8.16              | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-box-with-check"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| 8.15              | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-box-with-check"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| 8.14              | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-box-with-check"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| 8.13              | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-box-with-check"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| **[ImageMagick]** |                 **4.4**                 |                  **4.3**                   |                 **4.2**                 |                 **4.1**                 |
| 7.1               |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 7.0               |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 6.9.7-7+          |   :icon{name="twemoji:yellow-square"}   | :icon{name="twemoji:check-box-with-check"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 6.x               |    :icon{name="twemoji:cross-mark"}     |      :icon{name="twemoji:cross-mark"}      |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     |

::alert{type="success"}
Depending on the version of Mastodon, administrators may choose either libvips or ImageMagick.
::

::alert{type="info"}
The official Mastodon container images use libvips starting in 4.3.
::

::alert{type="warning"}
The use of GraphicsMagick as an alternative to ImageMagick **is not supported**.
::

::alert{type="danger"}
All Mastodon installs using ImageMagick should run at least 6.9.7-7 to mitigate CVE-2023-36460, see [this guide](https://github.com/mastodon/mastodon/issues/25776) for more details.
::

### FFmpeg

|     |                                         |                                         |                                         |                                         |
| --- | :-------------------------------------: | :-------------------------------------: | :-------------------------------------: | :-------------------------------------: |
|     |                 **4.4**                 |                 **4.3**                 |                 **4.2**                 |                 **4.1**                 |
| 7.1 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| 7.0 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    |   :icon{name="twemoji:white-circle"}    |
| 6.1 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |   :icon{name="twemoji:white-circle"}    |
| 5.1 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 4.4 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 4.3 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 4.2 | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |
| 3.4 |    :icon{name="twemoji:cross-mark"}     |    :icon{name="twemoji:cross-mark"}     | :icon{name="twemoji:check-mark-button"} | :icon{name="twemoji:check-mark-button"} |

::alert{type="success"}
FFmpeg has a complicated support cycle.
Refer to [endoflife.date](https://endoflife.date/ffmpeg) for more information on determining if your version of FFmpeg is considered supported.
::

::alert{type="warning"}
If you do not see a major/minor version of it listed in the matrix, it is considered end of life and not supported, it may still however work without issue.
::

### Ingress

::alert{type="success"}
Mastodon requires a load balancer or reverse proxy to properly terminate TLS/SSL connections between users and ingress traffic to the system.
Nginx is commonly used for this purpose, and [an example configuration](https://github.com/mastodon/mastodon/blob/main/dist/nginx.conf) is provided in the Mastodon respository.
There are no specific version requirements for Nginx, and other types of software can be used in place of Nginx, such as Caddy for example.
::

::alert{type="warning"}
Reguardless of the ingress software that is used, you should keep it up to date to prevent expliotation of known CVEs.
::

## Key

::alert{type="warning"}
Any dependencies listed for development versions (nightly/alpha) of Mastodon are based on tracking the development process of the `main` branch on GitHub and the project Discord.
These and are subject to change at any time as project requirements change.
::

| Key                                        |                                                             |
| ------------------------------------------ | ----------------------------------------------------------- |
| :icon{name="twemoji:check-mark-button"}    | Supported in this version                                   |
| :icon{name="twemoji:check-box-with-check"} | Supported in this version, with some caveats                |
| :icon{name="twemoji:yellow-square"}        | Supported in this version, but deprecated or at end of life |
| :icon{name="twemoji:cross-mark"}           | Not supported in this version                               |
| :icon{name="twemoji:white-circle"}         | Not available or not tested with this version               |
| :icon{name="twemoji:black-circle"}         | Not required for this version                               |

## Lifecycles

![Mastodon Branches](/mastodon-branches.png)

### End of Life

::alert{type="danger"}
End of Life versions of Mastodon do not receive any features, bug fixes, and generally no security updates except at the discretion of the core development team.
::

| **Mastodon**  | **Status**        |                                         |
| ------------- | ----------------- | :-------------------------------------: |
| 4.4.x         | Under Development |   :icon{name="twemoji:white-circle"}    |
| 4.3.x         | Supported         | :icon{name="twemoji:check-mark-button"} |
| 4.2.x         | Supported         | :icon{name="twemoji:check-mark-button"} |
| 4.1.x & prior | End of Life       |    :icon{name="twemoji:cross-mark"}     |

Reference: [Mastodon Security Policy](https://github.com/mastodon/mastodon/security)

## Additional Resources

- [Installing from Source](https://docs.joinmastodon.org/admin/install/) (docs.joinmastodon.org)
- [Mastodon Releases](https://github.com/mastodon/mastodon/releases) (github.com/mastodon/mastodon)

For the purposes of this document, when applied to dependencies the term "End of Life" is standardized to mean when there are no further updates of any kind, and/or no support available for a released version of Mastodon or it's dependencies.

- [Ruby](https://www.ruby-lang.org/en/downloads/branches/)
- [Node.js](https://github.com/nodejs/release#release-schedule)
- [Postgres](https://www.postgresql.org/support/versioning/)
- [Redis](https://redis.io/docs/about/releases/)
- [Elasticsearch](https://www.elastic.co/support/eol)
- [OpenSearch](https://opensearch.org/releases.html#maintenance-policy)
- [FFmpeg](https://endoflife.date/ffmpeg)

<meta name="fediverse:creator" content="@vmstan@vmst.io">

## About

For questions or comments please reach out to [@vmstan@vmst.io](https://vmst.io/@vmstan).
